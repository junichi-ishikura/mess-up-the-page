var Cursor,CursorManager,Flip,LeapElement,LeapManager,LeapManagerUtils,Particle,__bind=function(a,b){return function(){return a.apply(b,arguments)}};Particle=function(){function a(a){this.elem=a,this.style=a.style,this.elem.style.zIndex=9999,this.transformX=0,this.transformY=0,this.transformRotation=0,this.offsetTop=this.getOffset(this.elem).top,this.offsetLeft=this.getOffset(this.elem).left,this.velocityX=0,this.velocityY=0}return a.prototype.getOffset=function(a){var b,c,d;for(b=document.getElementsByTagName("body")[0],c=0,d=0;a&&!isNaN(a.offsetLeft)&&!isNaN(a.offsetTop);)c+=a.offsetLeft-a.scrollLeft,d+=a.offsetTop-a.scrollTop,a=a.offsetParent;return{top:d+b.scrollTop,left:c+b.scrollLeft}},a.prototype.tick=function(a){var b,c,d,e,f,g,h;return f=this.transformX,g=this.transformY,e=this.transformRotation,this.velocityX>1?this.velocityX-=1:this.velocityX<-1?this.velocityX+=1:this.velocityX=0,this.velocityY>1?this.velocityY-=1:this.velocityY<-1?this.velocityY+=1:this.velocityY=0,a&&(b=this.offsetLeft+this.transformX-a.x,c=this.offsetTop+this.transformY-a.y,d=Math.sqrt(Math.pow(b,2)+Math.pow(c,2)),d>0&&35>d&&(this.velocityX=+a.velocityX,this.velocityY=+a.velocityY)),this.transformX=this.transformX+this.velocityX,this.transformY=this.transformY+this.velocityY,this.transformRotation=-1*this.transformX,(Math.abs(f-this.transformX)>1||Math.abs(g-this.transformY)>1||Math.abs(e-this.transformRotation)>1)&&(this.transformX>1||this.transformX<-1||this.transformY>1||this.transformY<-1)?(h="translate("+this.transformX+"px, "+this.transformY+"px) rotate("+this.transformRotation+"deg)",this.style.WebkitTransform=h,this.style.msTransform=h,this.style.transform=h):void 0},a}(),this.Particle=Particle,Flip=function(){function a(){this.updateChars=__bind(this.updateChars,this);var a,b,c,d=this;window.LEAP_JS_DEMO_LOADED||(window.LEAP_JS_DEMO_LOADED=!0,window.HIDE_CONFIRMATION||(b=!0),this.body=document.getElementsByTagName("body")[0],this.setUpNodes(this.body.childNodes),this.chars=function(){var b,c,d,e;for(d=document.getElementsByTagName("particle"),e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push(new Particle(a,this.body));return e}.call(this),null!=b&&(c=document.createElement("style"),c.innerHTML="div#confirmation {\nposition: absolute;\ntop: -200px;\nleft: 0px;\nright: 0px;\nbottom: none;\nwidth: 100%;\npadding: 18px;\nmargin: 0px;\nbackground: #e8e8e8;\ntext-align: center;\nfont-size: 14px;\nline-height: 14px;\nfont-family: verdana, sans-serif;\ncolor: #000;\n-webkit-transition: all 1s ease-in-out;\n-moz-transition: all 1s ease-in-out;\n-o-transition: all 1s ease-in-out;\n-ms-transition: all 1s ease-in-out;\ntransition: all 1s ease-in-out;\n-webkit-box-shadow: 0px 3px 3px rgba(0,0,0,0.20);\n-moz-box-shadow: 0px 3px 3px rgba(0,0,0,0.20);\nbox-shadow: 0px 3px 3px rgba(0,0,0,0.20);\nz-index: 100000002;\n}\ndiv#confirmation span,div#confirmation a {\ncolor: #fe3a1a;\n}\ndiv#confirmation.show {\ntop:0px;\ndisplay:block;\n}",document.head.appendChild(c),this.confirmation=document.createElement("div"),this.confirmation.id="confirmation",this.confirmation.innerHTML="<span style='font-weight:bold;'>LeapJS Demo is Loaded!</span> Let's mess up the "+document.title.substring(0,50),this.body.appendChild(this.confirmation),setTimeout(function(){return d.confirmation.className="show"},10),setTimeout(function(){return d.confirmation.className=""},5e3)))}return a.prototype.setUpNodes=function(a){var b,c,d,e;for(e=[],c=0,d=a.length;d>c;c++)b=a[c],e.push(this.setUpNode(b));return e},a.prototype.setUpNode=function(a){var b,c,d,e,f;for(f=["script","style","iframe","canvas","video","audio","textarea","embed","object","select","area","map","input"],d=0,e=f.length;e>d;d++)if(b=f[d],a.nodeName.toLowerCase()===b)return;switch(a.nodeType){case 1:return this.setUpNodes(a.childNodes);case 3:if(!/^\s*$/.test(a.nodeValue))return 1===a.parentNode.childNodes.length?a.parentNode.innerHTML=this.setUpText(a.nodeValue):(c=document.createElement("particles"),c.innerHTML=this.setUpText(a.nodeValue),a.parentNode.replaceChild(c,a))}},a.prototype.setUpText=function(a){var b,c,d;return c=function(){var c,e,f,g;for(f=a.split(""),g=[],d=c=0,e=f.length;e>c;d=++c)b=f[d],/^\s*$/.test(b)?g.push("&nbsp;"):g.push("<particle style='display:inline-block;'>"+b+"</particle>");return g}(),c=c.join(""),c=function(){var a,e,f,g;for(f=c.split("&nbsp;"),g=[],d=a=0,e=f.length;e>a;d=++a)b=f[d],/^\s*$/.test(b)?g.push(b):g.push("<word style='white-space:nowrap'>"+b+"</word>");return g}(),c.join(" ")},a.prototype.updateChars=function(a){var b,c,d,e,f;for(e=this.chars,f=[],c=0,d=e.length;d>c;c++)b=e[c],f.push(b.tick(a));return f},a}(),this.Flip=new Flip,LeapElement=function(){function a(a){this.element=a,this.cursor=null}return a.prototype.appendChild=function(a){return a instanceof HTMLElement?this.element.appendChild(a):this.element.appendChild(a.getElement())},a.prototype.removeChild=function(a){return a instanceof HTMLElement?this.element.removeChild(a):this.element.removeChild(a.getElement())},a.prototype.getID=function(){return this.element.id},a.prototype.setStyle=function(a){var b,c,d,e;for(e=[],c=0,d=a.length;d>c;c++)b=a[c],e.push(this.element.style[b]=a[b]);return e},a.prototype.getParent=function(){return this.element.parentNode},a.prototype.getWidth=function(){return this.element.offsetWidth},a.prototype.getHeight=function(){return this.element.offsetHeight},a.prototype.getElement=function(){return this.element},a.prototype.hasCursor=function(){return null!==this.cursor},a.prototype.capture=function(a){return this.cursor=a,this.cursor.capture(this)},a.prototype.setXY=function(a,b){return this.setX(a),this.setY(b)},a.prototype.setX=function(a){return this.element.style.left=a+"px"},a.prototype.setY=function(a){return this.element.style.top=a+"px"},a.prototype.getX=function(){return this.element.getBoundingClientRect().left},a.prototype.getY=function(){return this.element.getBoundingClientRect().top},a.prototype.addClass=function(a){var b;return b=this.element.className,b&&-1!==b.indexOf(a)?void 0:(""!==b&&(a=" "+a),this.element.className=b+a)},a.prototype.removeClass=function(a){var b,c;return b=this.element.className,c=new RegExp("\\s?\\b"+a+"\\b","g"),b=b.replace(c,""),this.element.className=b},a.prototype.fireEvent=function(a){return this.element.dispatchEvent(a)},a}(),this.LeapElement=LeapElement,LeapManagerUtils=function(){function a(){}return a.ELEMENT_ID_PREFIX="leap_element_",a.extend=function(a,b){var c,d,e;for(d=0,e=b.length;e>d;d++)c=b[d],a[c]=b[c];return void 0},a.extendIf=function(b,c){var d;for(d in c)c[d]instanceof Object&&c[d].constructor===Object?((void 0===b[d]||null===b[d])&&(b[d]={}),a.extendIf(b[d],c[d])):(void 0===b[d]||null===b[d])&&(b[d]=c[d]);return void 0},a.exists=function(a){return void 0!==a&&null!==a},a.map=function(a,b,c,d,e){return a===b?d:(a-b)*(e-d)/(c-b)+d},a.error=function(a){return console.log(a)},a.testStructure=function(a,b){var c,d,e,f;for(d=null,c=e=0,f=b.length;f>=0?f>e:e>f;c=f>=0?++e:--e)if(d=b[c],"string"==typeof d){if(!this.exists(a[d]))return!1;a=a[d]}return!0},a.createStructure=function(a,b){var c,d,e,f,g;for(d=!0,e=null,c=f=0,g=b.length;g>=0?g>f:f>g;c=g>=0?++f:--f)e=b[c],"string"==typeof e&&(this.exists(a[e])||(a=a[e]={},d=!1));return d},a}(),this.LeapManagerUtils=LeapManagerUtils,Cursor=function(){function a(a){var b,c;return a?a.source?a.id?a.icon?(this.defaultConfig={easing:.2},LeapManagerUtils.extendIf(a,this.defaultConfig),this.source=a.source,this.id=a.id,this.type=a.type,this.icon=a.icon,this.easing=a.easing,this.x=0,this.y=0,this.z=0,this.X=0,this.Y=0,this.Z=0,this.vX=0,this.vY=0,this.vZ=0,this.enabled=!0,this.element=null,this.type="real",this.icon instanceof HTMLElement&&(this.icon=new LeapElement(this.icon)),a.position&&(this.update(a.position.x,a.position.y),c=this.icon.getWidth()/2,b=this.icon.getHeight()/2,this.icon.setX(a.position.x*window.innerWidth+c),this.icon.setY(a.position.y*window.innerHeight+b)),void 0):(LeapManagerUtils.error("Cursor#constructor: You must specify a `icon`."),null):(LeapManagerUtils.error("Cursor#constructor: You must specify a `id`."),null):(LeapManagerUtils.error("Cursor#constructor: You must specify a `source`."),null):(LeapManagerUtils.error("Cursor#constructor: You must specify a config object."),null)}return a.prototype.setManager=function(a){return this.manager=a},a.prototype.setEnabled=function(a){return this.enabled=a},a.prototype.isEnabled=function(){return this.enabled},a.prototype.setElement=function(a){return this.element=a},a.prototype.getElement=function(){return this.element},a.prototype.hasElement=function(){return null!==this.element},a.prototype.update=function(a,b,c){return this.setPositionX(a),this.setPositionY(b),this.setPositionZ(c)},a.prototype.setPositionX=function(a){return this.X=a-this.x,this.x=a},a.prototype.setPositionY=function(a){return this.Y=a-this.y,this.y=a},a.prototype.setPositionZ=function(a){return this.Z=a-this.z,this.z=a},a.prototype.getX=function(){return this.x},a.prototype.getY=function(){return this.y},a.prototype.getZ=function(){return this.z},a.prototype.setVelocityXYZ=function(a,b,c){return this.setVelocityX(a),this.setVelocityY(b),this.setVelocityZ(c)},a.prototype.setVelocityX=function(a){return this.vX=a},a.prototype.setVelocityY=function(a){return this.vY=a},a.prototype.setVelocityZ=function(a){return this.vZ=a},a.prototype.getVelocityX=function(){return this.vX},a.prototype.getVelocityY=function(){return this.vY},a.prototype.getVelocityZ=function(){return this.vZ},a.prototype.getEasing=function(){return this.easing},a.prototype.dispatchMove=function(a){var b;return a&&this.setElement(a),this.hasElement()?(b=document.createEvent("MouseEvent"),b.initMouseEvent("mousemove",!0,!1,window,1,this.icon.getX(),this.icon.getY(),this.icon.getX(),this.icon.getY(),!1,!1,!1,!1,0,this.element)):void 0},a}(),this.Cursor=Cursor,CursorManager=function(){function a(a){var b;this.cursorContainerClass="leap-cursor-container",this.leapCursorClass="leap-cursor",this.cursorContainer||(this.cursorContainer=new LeapElement(document.createElement("div")),b=a.root||document.body,b.appendChild(this.cursorContainer.element),this.cursorContainer.addClass(this.cursorContainerClass),this.cursorContainer.setStyle({zIndex:1e5,position:"fixed",top:"0px",left:"0px"})),this.elementLookup={},this.cursorLookup={}}return a.prototype.get=function(a,b,c){return(null===c||void 0===c)&&(c="real"),LeapManagerUtils.createStructure(this.cursorLookup,[c,a]),this.cursorLookup[c][a][b]},a.prototype.add=function(a){var b,c,d;return d=a.type||"real",c=a.source||"default",b=a.id||0,LeapManagerUtils.createStructure(this.cursorLookup,[d,c]),LeapManagerUtils.exists(this.cursorLookup[d][c][b])?this.cursorLookup[d][c][b]:(this.cursorLookup[d][c][b]=a,this.cursorContainer.appendChild(a.icon),a.icon.addClass(this.leapCursorClass),a.setManager(this),a)},a.prototype.remove=function(a){var b,c,d;return d=a.type||"real",c=a.source||"default",b=a.id||0,LeapManagerUtils.testStructure(this.elementLookup,[a.source,a.id])&&(this.elementLookup[a.source][a.id]=null),a.virtualCursors=[],a.setManager(null),LeapManagerUtils.exists(a.icon.getParent())&&this.cursorContainer.removeChild(a.icon),LeapManagerUtils.testStructure(this.cursorLookup,[d,c])&&(this.cursorLookup[d][c][a.id]=null,delete this.cursorLookup[d][c][a.id]),!0},a.prototype.pruneCursors=function(a,b,c){var d,e,f,g,h,i;if(LeapManagerUtils.exists(c)||(c="real"),LeapManagerUtils.testStructure(this.cursorLookup,[c,a])){g=[];for(e in this.cursorLookup[c][a])d=this.cursorLookup[c][a][e],d instanceof Cursor&&-1===b.indexOf(d.id)&&g.push(d);for(f=h=0,i=g.length;i>=0?i>h:h>i;f=i>=0?++h:--h)this.remove(g[f])}return void 0},a.prototype.update=function(){var a,b,c,d,e,f,g,h,i,j,k,l;for(i in this.cursorLookup)for(f in this.cursorLookup[i])for(b in this.cursorLookup[i][f])if(a=this.cursorLookup[i][f][b],a instanceof Cursor){if(this.elementLookup[a.source]||(this.elementLookup[a.source]={}),this.elementLookup[a.source][a.id]||(this.elementLookup[a.source][a.id]=null),j={x:Math.round(a.getX()*window.innerWidth),y:Math.round(a.getY()*window.innerHeight)},c=this.elementLookup[a.source][a.id],!a.isEnabled()){c&&(this.elementLookup[a.source][a.id]=null);continue}e=a.icon.getWidth()/2,d=a.icon.getHeight()/2,k=j.x-e-a.icon.getX(),l=j.y-d-a.icon.getY(),a.setVelocityXYZ(k*a.getEasing(),l*a.getEasing(),0),g=a.icon.getX()+a.getVelocityX(),h=a.icon.getY()+a.getVelocityY(),a.icon.setX(g),a.icon.setY(h),Flip.updateChars({x:g+e,y:h+document.body.scrollTop+d,velocityX:a.getVelocityX(),velocityY:a.getVelocityY()})}return void 0},a.prototype.cursorMove=function(a,b){return a.dispatchMove(b),void 0},a}(),this.CursorManager=CursorManager,LeapManager=function(){function a(){this.LEAP_POINTABLE_CURSOR_CLASS="leap-pointable-cursor",this.LEAP_SOURCE="leap",this.defaultConfig={maxCursors:1,enableInBackground:!1,root:null,boundary:{top:350,left:-100,right:100,bottom:150},cursorConfig:{},loopConfig:{enableGestures:!1}},this.cursorManager=null,this.isActiveWindow=!1,this.init({maxCursors:1})}return a.prototype.init=function(a){var b,c,d=this;return LeapManagerUtils.extendIf(a,this.defaultConfig),this.boundary=a.boundary,this.maxCursors=a.maxCursors,this.cursorConfig=a.cursorConfig,this.cursorManager=new CursorManager({root:a.root}),c=document.createElement("style"),c.innerHTML='.leap-cursor {\nposition: absolute;\ntransition-property: background-color; }\n\n.leap-pointable-cursor {\nwidth: 60px;\nheight: 60px;\nz-index: 999999;\n\nborder-radius: 100%;\n/* IE10 Consumer Preview */\nbackground-image: -ms-linear-gradient(bottom, #FD2D65 0%, #FF5E3A 100%);\n/* Mozilla Firefox */\nbackground-image: -moz-linear-gradient(bottom, #FD2D65 0%, #FF5E3A 100%);\n/* Opera */\nbackground-image: -o-linear-gradient(bottom, #FD2D65 0%, #FF5E3A 100%);\n/* Webkit (Safari/Chrome 10) */\nbackground-image: -webkit-gradient(linear, left bottom, left top, color-stop(0, #FD2D65), color-stop(1, #FF5E3A));\n/* Webkit (Chrome 11+) */\nbackground-image: -webkit-linear-gradient(bottom, #FD2D65 0%, #FF5E3A 100%);\n/* W3C Markup, IE10 Release Preview */\nbackground-image: linear-gradient(to top, #FD2D65 0%, #FF5E3A 100%);\n\noverflow:hidden;\nbox-shadow:  0px 2px 4px 0px rgba(0, 0, 0, 0.4);\nmargin: 0 auto;\n}\n\n.finger {\n/*\nwidth:84px;\nheight:170px;\n*/\nwidth:30px;\nheight:70px;\nposition:absolute;\nbackground:#fff;\n/*  top:20px;\nleft:38px;\n*/\ntop:10px;\nleft:15px;\nborder-radius:20px;\n}\n.finger:after {\ncontent:"";\nwidth:22px;\nheight:26px;\n/* IE10 Consumer Preview */\nbackground-image: -ms-linear-gradient(bottom, #FC3D5F 0%, #FC584A 100%);\n/* Mozilla Firefox */\nbackground-image: -moz-linear-gradient(bottom, #FC3D5F 0%, #FC584A 100%);\n/* Opera */\nbackground-image: -o-linear-gradient(bottom, #FC3D5F 0%, #FC584A 100%);\n/* Webkit (Safari/Chrome 10) */\nbackground-image: -webkit-gradient(linear, left bottom, left top, color-stop(0, #FC3D5F), color-stop(1, #FC584A));\n/* Webkit (Chrome 11+) */\nbackground-image: -webkit-linear-gradient(bottom, #FC3D5F 0%, #FC584A 100%);\n/* W3C Markup, IE10 Release Preview */\nbackground-image: linear-gradient(to top, #FC3D5F 0%, #FC584A 100%);\nposition:absolute;\ntop:5px;\nleft:4px;\nborder-radius:10px;\n}\n.burb {\nheight:2px;\nwidth:10px;\nposition:absolute;\nbackground:#FF3162;\ntop:47px;\nleft:25px;\n}\n.burb:after {\ncontent:"";\nheight:2px;\nwidth:15px;\nposition:absolute;\nbackground:#FF3162;\ntop:5px;\nleft:-2px;\n}',document.head.appendChild(c),this.isActiveWindow=!0,a.enableInBackground||(window.addEventListener("blur",function(){return this.isActiveWindow=!1}),window.addEventListener("focus",function(){return this.isActiveWindow=!0})),b=function(a){return d.onLoop(a)},null!==Leap?Leap.loop(a.loopConfig,b):void 0},a.prototype.onLoop=function(a){return this.isActiveWindow&&(this.cursorManager.update(),this.updatePointables(a)),void 0},a.prototype.updatePointables=function(a){var b,c,d,e,f,g,h,i,j;if(b=[],a&&a.pointables)for(e=i=0,j=a.pointables.length;j>=0?j>i:i>j;e=j>=0?++i:--i)e<this.maxCursors&&(d=a.pointables[e],d&&(f=LeapManagerUtils.map(d.tipPosition[0],this.boundary.left,this.boundary.right,0,1),g=LeapManagerUtils.map(d.tipPosition[1],this.boundary.bottom,this.boundary.top,1,0),h=d.tipPosition[2],c=this.getCursor(d.id,{x:f,y:g,z:h}),b.push(c.id),c.update(f,g,h)));return this.cursorManager.pruneCursors(this.LEAP_SOURCE,b),void 0},a.prototype.getCursor=function(a,b){var c,d,e,f,g;return(e=this.cursorManager.get(this.LEAP_SOURCE,a))?e:(g=new LeapElement(document.createElement("div")),g.addClass(this.LEAP_POINTABLE_CURSOR_CLASS),f=document.createElement("div"),f.className="finger",g.appendChild(f),c=document.createElement("div"),c.className="burb",g.appendChild(c),d={source:this.LEAP_SOURCE,id:a,position:b,icon:g},LeapManagerUtils.extend(d,this.cursorConfig),e=new Cursor(d),this.cursorManager.add(e),e)},a}(),this.LeapManager=new LeapManager;